2024-06-15 20:32:18.449 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 20:32:18.513 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 20:32:18.535 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-06-15 20:32:18.559 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-06-15 20:32:18.930 -05:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 113), @p2='?' (Size = 22), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (Size = 3), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Product" ("Id", "Description", "Name", "Status", "Stock", "Price_CurrencyType", "Price_DiscountPercent", "Price_Value")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-15 20:32:18.965 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'TektonLabs.Challenge.Infraestructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-15 20:32:19.391 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-15 20:32:19.392 -05:00 [INF] Hosting environment: Development
2024-06-15 20:32:19.392 -05:00 [INF] Content root path: C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API
2024-06-15 20:32:19.447 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/index.html - null null
2024-06-15 20:32:19.765 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_vs/browserLink - null null
2024-06-15 20:32:19.765 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 20:32:19.766 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/index.html - 200 null text/html;charset=utf-8 322.9009ms
2024-06-15 20:32:19.772 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 5.0661ms
2024-06-15 20:32:19.824 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.5909ms
2024-06-15 20:32:19.942 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - null null
2024-06-15 20:32:20.076 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.6163ms
2024-06-15 20:32:52.409 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 141
2024-06-15 20:32:52.416 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:32:52.442 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 20:32:57.541 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 20:32:58.777 -05:00 [ERR] El comando CreateProductCommand tuvo errores
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
2024-06-15 20:32:58.840 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 6394.5831ms
2024-06-15 20:32:58.840 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:32:58.888 -05:00 [ERR] Ocurrio una exception: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
   at TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Controllers\Product\ProductController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at TektonLabs.Challenge.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-06-15 20:32:58.899 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 500 null application/json; charset=utf-8 6490.9059ms
2024-06-15 20:34:47.346 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 141
2024-06-15 20:34:47.347 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:34:47.348 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 20:34:47.361 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 20:34:48.607 -05:00 [ERR] El comando CreateProductCommand tuvo errores
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
2024-06-15 20:34:48.662 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 1314.3815ms
2024-06-15 20:34:48.663 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:34:48.702 -05:00 [ERR] Ocurrio una exception: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
   at TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Controllers\Product\ProductController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at TektonLabs.Challenge.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-06-15 20:34:48.704 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 500 null application/json; charset=utf-8 1358.3706ms
2024-06-15 20:35:02.401 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 141
2024-06-15 20:35:02.402 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:35:02.402 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 20:35:02.405 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 20:35:06.672 -05:00 [ERR] El comando CreateProductCommand tuvo errores
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
2024-06-15 20:35:06.719 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 4316.2432ms
2024-06-15 20:35:06.719 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:35:06.759 -05:00 [ERR] Ocurrio una exception: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
   at TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Controllers\Product\ProductController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at TektonLabs.Challenge.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-06-15 20:35:06.762 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 500 null application/json; charset=utf-8 4360.4824ms
2024-06-15 20:35:14.316 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 141
2024-06-15 20:35:14.316 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:35:14.316 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 20:35:14.318 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 20:35:35.197 -05:00 [ERR] El comando CreateProductCommand tuvo errores
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
2024-06-15 20:35:35.253 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 20936.4433ms
2024-06-15 20:35:35.254 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:35:35.291 -05:00 [ERR] Ocurrio una exception: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
   at TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Controllers\Product\ProductController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at TektonLabs.Challenge.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-06-15 20:35:35.293 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 500 null application/json; charset=utf-8 20977.3352ms
2024-06-15 20:35:55.520 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 141
2024-06-15 20:35:55.520 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:35:55.521 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 20:35:55.522 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 20:42:36.262 -05:00 [ERR] El comando CreateProductCommand tuvo errores
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
2024-06-15 20:42:36.310 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 400789.0238ms
2024-06-15 20:42:36.310 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 20:42:36.343 -05:00 [ERR] Ocurrio una exception: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
System.Text.Json.JsonException: The JSON value could not be converted to System.Decimal. Path: $.price | LineNumber: 0 | BytePositionInLine: 35.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'String' as a number.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedNumber(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDecimal(Decimal& value)
   at System.Text.Json.Utf8JsonReader.GetDecimal()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 json, JsonTypeInfo`1 jsonTypeInfo)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](String json, JsonSerializerOptions options)
   at TektonLabs.Challenge.Infraestructure.ExternalServices.ProductExternalService.GetDiscountFromProduct(Int32 productId) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Infraestructure\ExternalServices\ProductExternalService.cs:line 34
   at TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Products\Create\CreateProductCommandHandler.cs:line 26
   at TektonLabs.Challenge.Application.Abstractions.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\ValidationBehavior.cs:line 47
   at LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.Application\Abstractions\Behaviors\LoggingBehavior.cs:line 27
   at TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create(CreateProductCommand request, CancellationToken cancellationToken) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Controllers\Product\ProductController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at TektonLabs.Challenge.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-06-15 20:42:36.346 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 500 null application/json; charset=utf-8 400826.0981ms
2024-06-15 21:06:48.855 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 21:06:48.909 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 21:06:48.920 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-06-15 21:06:48.932 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-06-15 21:06:49.302 -05:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 75), @p2='?' (Size = 21), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (Size = 3), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Product" ("Id", "Description", "Name", "Status", "Stock", "Price_CurrencyType", "Price_DiscountPercent", "Price_Value")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-15 21:06:49.335 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'TektonLabs.Challenge.Infraestructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-15 21:06:49.672 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-15 21:06:49.672 -05:00 [INF] Hosting environment: Development
2024-06-15 21:06:49.673 -05:00 [INF] Content root path: C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API
2024-06-15 21:06:49.725 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/index.html - null null
2024-06-15 21:06:49.933 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/index.html - 200 null text/html;charset=utf-8 214.9008ms
2024-06-15 21:06:49.944 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_vs/browserLink - null null
2024-06-15 21:06:49.944 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 21:06:49.947 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 3.6598ms
2024-06-15 21:06:49.985 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.6195ms
2024-06-15 21:06:50.032 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - null null
2024-06-15 21:06:50.137 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.9521ms
2024-06-15 21:07:07.723 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 152
2024-06-15 21:07:07.731 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 21:07:07.754 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 21:07:07.801 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 21:11:51.567 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 21:11:51.638 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-06-15 21:11:51.652 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-06-15 21:11:51.670 -05:00 [INF] No migrations were applied. The database is already up to date.
2024-06-15 21:11:51.973 -05:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 121), @p2='?' (Size = 25), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (Size = 3), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Product" ("Id", "Description", "Name", "Status", "Stock", "Price_CurrencyType", "Price_DiscountPercent", "Price_Value")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-15 21:11:52.009 -05:00 [ERR] An exception occurred in the database while saving changes for context type 'TektonLabs.Challenge.Infraestructure.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Product.Id'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-15 21:11:52.289 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-15 21:11:52.297 -05:00 [INF] Hosting environment: Development
2024-06-15 21:11:52.298 -05:00 [INF] Content root path: C:\hnavarro\Personal\Repository\TektonLabs\src\TektonLabs.Challenge.API
2024-06-15 21:11:52.350 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/index.html - null null
2024-06-15 21:11:52.669 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 21:11:52.670 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/_vs/browserLink - null null
2024-06-15 21:11:52.669 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/index.html - 200 null text/html;charset=utf-8 323.1416ms
2024-06-15 21:11:52.679 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_framework/aspnetcore-browser-refresh.js - 200 13784 application/javascript; charset=utf-8 4.4174ms
2024-06-15 21:11:52.731 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.907ms
2024-06-15 21:11:52.784 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - null null
2024-06-15 21:11:52.899 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.8442ms
2024-06-15 21:12:14.676 -05:00 [INF] Request starting HTTP/2 POST https://localhost:44332/api/products - application/json 129
2024-06-15 21:12:14.689 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 21:12:14.723 -05:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(TektonLabs.Challenge.Application.Products.CreateProduct.CreateProductCommand, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 21:12:14.776 -05:00 [INF] Ejecutando el request: CreateProductCommand
2024-06-15 21:12:25.993 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 24), @p2='?' (Size = 6), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (Size = 3), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Product" ("Id", "Description", "Name", "Status", "Stock", "Price_CurrencyType", "Price_DiscountPercent", "Price_Value")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-15 21:12:26.177 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."Status", "p"."Stock", "p"."Price_CurrencyType", "p"."Price_DiscountPercent", "p"."Price_Value"
FROM "Product" AS "p"
WHERE "p"."Id" = @__id_0
LIMIT 1
2024-06-15 21:12:26.179 -05:00 [INF] El request CreateProductCommand se ejecuto en: 403
2024-06-15 21:12:26.183 -05:00 [INF] Executing OkObjectResult, writing value of type 'TektonLabs.Challenge.Domain.Abstranctions.Result'.
2024-06-15 21:12:26.188 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API) in 11462.117ms
2024-06-15 21:12:26.188 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Create (TektonLabs.Challenge.API)'
2024-06-15 21:12:26.193 -05:00 [INF] Request finished HTTP/2 POST https://localhost:44332/api/products - 200 null application/json; charset=utf-8 11517.6508ms
2024-06-15 21:12:38.100 -05:00 [INF] Request starting HTTP/2 GET https://localhost:44332/api/products/2 - null null
2024-06-15 21:12:38.101 -05:00 [INF] Executing endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Get (TektonLabs.Challenge.API)'
2024-06-15 21:12:38.109 -05:00 [INF] Route matched with {action = "Get", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32, System.Threading.CancellationToken) on controller TektonLabs.Challenge.API.Controllers.Product.ProductsController (TektonLabs.Challenge.API).
2024-06-15 21:12:38.122 -05:00 [INF] Ejecutando el request: GetProductQuery
2024-06-15 21:12:38.129 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Description", "p"."Name", "p"."Status", "p"."Stock", "p"."Price_CurrencyType", "p"."Price_DiscountPercent", "p"."Price_Value"
FROM "Product" AS "p"
WHERE "p"."Id" = @__id_0
LIMIT 1
2024-06-15 21:12:38.144 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__code_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Code", "s"."Name"
FROM "StatusType" AS "s"
WHERE "s"."Code" = @__code_0
LIMIT 1
2024-06-15 21:12:38.146 -05:00 [INF] El request GetProductQuery se ejecuto en: 24
2024-06-15 21:12:38.147 -05:00 [INF] Executing OkObjectResult, writing value of type 'TektonLabs.Challenge.Domain.Abstranctions.Result`1[[TektonLabs.Challenge.Application.Products.Get.GetProductResponse, TektonLabs.Challenge.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 21:12:38.155 -05:00 [INF] Executed action TektonLabs.Challenge.API.Controllers.Product.ProductsController.Get (TektonLabs.Challenge.API) in 45.4764ms
2024-06-15 21:12:38.155 -05:00 [INF] Executed endpoint 'TektonLabs.Challenge.API.Controllers.Product.ProductsController.Get (TektonLabs.Challenge.API)'
2024-06-15 21:12:38.156 -05:00 [INF] Request finished HTTP/2 GET https://localhost:44332/api/products/2 - 200 null application/json; charset=utf-8 56.1218ms
